annotations:
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: ''
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -400.0
    y1: -120.0
    z_index: 0
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      10.0.0.254
      1.1.1.1
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 80.0
    y1: -120.0
    z_index: 1
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: ''
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 280.0
    y1: -240.0
    z_index: 2
  - border_color: '#808080FF'
    border_radius: 0
    border_style: ''
    color: '#FFD0D0FF'
    thickness: 1
    type: rectangle
    x1: -240.0
    y1: -280.0
    x2: 200.0
    y2: 360.0
    z_index: 0
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: RSPAN
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -200.0
    y1: -120.0
    z_index: 3
  - border_color: '#808080FF'
    border_radius: 0
    border_style: ''
    color: '#FFFFFFFF'
    thickness: 1
    type: rectangle
    x1: -40.0
    y1: -400.0
    x2: 200.0
    y2: 200.0
    z_index: 4
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: SPAN
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 0.0
    y1: -360.0
    z_index: 5
  - border_color: '#808080FF'
    border_radius: 0
    border_style: ''
    color: '#C0FF9FFF'
    thickness: 1
    type: rectangle
    x1: 40.0
    y1: 40.0
    x2: 560.0
    y2: 280.0
    z_index: 6
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: ERSPAN
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 280.0
    y1: 80.0
    z_index: 7
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: 10.100.0.0/24
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 160.0
    y1: 240.0
    z_index: 8
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      10.200.0.0/24 | 172.16.0.0/24
      2.2.2.2
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 320.0
    y1: -40.0
    z_index: 9
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: '.11'
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 40.0
    y1: 280.0
    z_index: 10
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: '.12'
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 360.0
    y1: 240.0
    z_index: 11
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: DHCP
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -160.0
    y1: -160.0
    z_index: 12
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: DHCP
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 0.0
    y1: -320.0
    z_index: 13
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: DHCP
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 520.0
    y1: 240.0
    z_index: 14
nodes:
  - boot_disk_size: null
    configuration: "Building configuration...\n\nCurrent configuration : 5605 bytes\n\
      !\n! Last configuration change at 23:38:57 UTC Sun Oct 13 2024\n!\nversion 17.3\n\
      service timestamps debug datetime msec\nservice timestamps log datetime msec\n\
      ! Call-home is enabled by Smart-Licensing.\nservice call-home\nplatform qfp\
      \ utilization monitor load 80\nplatform punt-keepalive disable-kernel-core\n\
      platform console serial\n!\nhostname R1\n!\nboot-start-marker\nboot-end-marker\n\
      !\n!\nno logging console\nenable secret 9 $9$RdrjWxKNuHPK9k$kA3DJ..exG/.VwQIczWn.v0qSo.TUGwCRPT229XtC2E\n\
      !\nno aaa new-model\n!\n!\n!\n!\n!\n!\n!\nip domain name cisco.local\nip dhcp\
      \ excluded-address 10.0.0.1 10.0.0.10\nip dhcp excluded-address 10.0.0.200 10.0.0.255\n\
      ip dhcp excluded-address 10.0.99.1 10.0.99.100\nip dhcp excluded-address 10.0.99.200\
      \ 10.0.99.255\nip dhcp excluded-address 10.0.50.200 10.0.50.255\nip dhcp excluded-address\
      \ 10.0.50.0 10.0.50.10\n!\nip dhcp pool MY_POOL\n network 10.0.0.0 255.255.255.0\n\
      \ default-router 10.0.0.254\n dns-server 8.8.8.8\n lease 0 7\n!\nip dhcp pool\
      \ MY_POOL_99\n network 10.0.99.0 255.255.255.0\n default-router 10.0.99.254\n\
      \ dns-server 8.8.8.8\n lease 0 7\n!\nip dhcp pool MY_POOL_10\n network 10.0.50.0\
      \ 255.255.255.0\n default-router 10.0.50.254\n dns-server 8.8.8.8\n lease 0\
      \ 7\n!\n!\n!\nlogin on-success log\n!\n!\n!\n!\n!\n!\n!\nsubscriber templating\n\
      !\n!\n!\n!\n!\n!\nmultilink bundle-name authenticated\n!\n!\n!\n!\n!\n!\n!\n\
      !\n!\n!\n!\n!\n!\n!\n!\ncrypto pki trustpoint SLA-TrustPoint\n enrollment pkcs12\n\
      \ revocation-check crl\n!\n!\ncrypto pki certificate chain SLA-TrustPoint\n\
      \ certificate ca 01\n  30820321 30820209 A0030201 02020101 300D0609 2A864886\
      \ F70D0101 0B050030\n  32310E30 0C060355 040A1305 43697363 6F312030 1E060355\
      \ 04031317 43697363\n  6F204C69 63656E73 696E6720 526F6F74 20434130 1E170D31\
      \ 33303533 30313934\n  3834375A 170D3338 30353330 31393438 34375A30 32310E30\
      \ 0C060355 040A1305\n  43697363 6F312030 1E060355 04031317 43697363 6F204C69\
      \ 63656E73 696E6720\n  526F6F74 20434130 82012230 0D06092A 864886F7 0D010101\
      \ 05000382 010F0030\n  82010A02 82010100 A6BCBD96 131E05F7 145EA72C 2CD686E6\
      \ 17222EA1 F1EFF64D\n  CBB4C798 212AA147 C655D8D7 9471380D 8711441E 1AAF071A\
      \ 9CAE6388 8A38E520\n  1C394D78 462EF239 C659F715 B98C0A59 5BBB5CBD 0CFEBEA3\
      \ 700A8BF7 D8F256EE\n  4AA4E80D DB6FD1C9 60B1FD18 FFC69C96 6FA68957 A2617DE7\
      \ 104FDC5F EA2956AC\n  7390A3EB 2B5436AD C847A2C5 DAB553EB 69A9A535 58E9F3E3\
      \ C0BD23CF 58BD7188\n  68E69491 20F320E7 948E71D7 AE3BCC84 F10684C7 4BC8E00F\
      \ 539BA42B 42C68BB7\n  C7479096 B4CB2D62 EA2F505D C7B062A4 6811D95B E8250FC4\
      \ 5D5D5FB8 8F27D191\n  C55F0D76 61F9A4CD 3D992327 A8BB03BD 4E6D7069 7CBADF8B\
      \ DF5F4368 95135E44\n  DFC7C6CF 04DD7FD1 02030100 01A34230 40300E06 03551D0F\
      \ 0101FF04 04030201\n  06300F06 03551D13 0101FF04 05300301 01FF301D 0603551D\
      \ 0E041604 1449DC85\n  4B3D31E5 1B3E6A17 606AF333 3D3B4C73 E8300D06 092A8648\
      \ 86F70D01 010B0500\n  03820101 00507F24 D3932A66 86025D9F E838AE5C 6D4DF6B0\
      \ 49631C78 240DA905\n  604EDCDE FF4FED2B 77FC460E CD636FDB DD44681E 3A5673AB\
      \ 9093D3B1 6C9E3D8B\n  D98987BF E40CBD9E 1AECA0C2 2189BB5C 8FA85686 CD98B646\
      \ 5575B146 8DFC66A8\n  467A3DF4 4D565700 6ADF0F0D CF835015 3C04FF7C 21E878AC\
      \ 11BA9CD2 55A9232C\n  7CA7B7E6 C1AF74F6 152E99B7 B1FCF9BB E973DE7F 5BDDEB86\
      \ C71E3B49 1765308B\n  5FB0DA06 B92AFE7F 494E8A9E 07B85737 F3A58BE1 1A48A229\
      \ C37C1E69 39F08678\n  80DDCD16 D6BACECA EEBC7CF9 8428787B 35202CDC 60E4616A\
      \ B623CDBD 230E3AFB\n  418616A9 4093E049 4D10AB75 27E86F73 932E35B5 8862FDAE\
      \ 0275156F 719BB2F0\n  D697DF7F 28\n  \tquit\n!\nlicense udi pid CSR1000V sn\
      \ 9899PAWEGNG\ndiagnostic bootup level minimal\nmemory free low-watermark processor\
      \ 71465\n!\n!\nspanning-tree extend system-id\n!\n!\nredundancy\n!\n!\n!\n!\n\
      !\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\ninterface Loopback1\n\
      \ ip address 10.1.1.1 255.255.255.255\n!\ninterface Port-channel1\n no ip address\n\
      \ no negotiation auto\n no mop enabled\n no mop sysid\n!\ninterface GigabitEthernet1\n\
      \ no ip address\n negotiation auto\n no mop enabled\n no mop sysid\n!\ninterface\
      \ GigabitEthernet1.1\n encapsulation dot1Q 1 native\n ip address 10.0.0.254\
      \ 255.255.255.0\n!\ninterface GigabitEthernet1.50\n encapsulation dot1Q 50\n\
      \ ip address 10.0.50.254 255.255.255.0\n!\ninterface GigabitEthernet2\n ip address\
      \ 192.168.0.51 255.255.255.0\n negotiation auto\n no mop enabled\n no mop sysid\n\
      !\ninterface GigabitEthernet3\n ip address 10.100.0.254 255.255.255.0\n negotiation\
      \ auto\n no mop enabled\n no mop sysid\n!\ninterface GigabitEthernet4\n ip address\
      \ 10.200.0.1 255.255.255.0\n negotiation auto\n no mop enabled\n no mop sysid\n\
      !\nrouter ospf 1\n router-id 1.1.1.1\n redistribute connected\n network 10.200.0.0\
      \ 0.0.0.255 area 0\n!\nip forward-protocol nd\nno ip http server\nip http secure-server\n\
      !\nip ssh version 2\n!\n!\n!\n!\n!\n!\n!\ncontrol-plane\n!\n!\n!\n!\n!\nprivilege\
      \ interface level 15 shutdown\nprivilege interface level 15 ip address\nprivilege\
      \ interface level 15 ip\nprivilege interface level 15 no shutdown\nprivilege\
      \ interface level 15 no ip address\nprivilege interface level 15 no ip\nprivilege\
      \ interface level 0 no\nprivilege interface level 15 no\nprivilege configure\
      \ level 15 banner\nprivilege configure level 15 interface\nprivilege exec level\
      \ 15 configure terminal\nprivilege exec level 15 configure\nbanner motd ^CBANNER_MADE^C\n\
      !\nline con 0\n exec-timeout 0 0\n stopbits 1\nline vty 0 4\n exec-timeout 0\
      \ 0\n no login\n transport preferred none\n transport input ssh\nline vty 5\
      \ 15\n no login\n transport preferred none\n transport input ssh\n!\ncall-home\n\
      \ ! If contact email address in call-home is configured as sch-smart-licensing@cisco.com\n\
      \ ! the email address configured in Cisco Smart License Portal will be used\
      \ as contact email address to send SCH notifications.\n contact-email-addr sch-smart-licensing@cisco.com\n\
      \ profile \"CiscoTAC-1\"\n  active\n  destination transport-method http\n!\n\
      !\n!\n!\n!\nend"
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n0
    image_definition: null
    label: R1
    node_definition: csr1000v
    ram: null
    tags: []
    x: 120
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3144 bytes
      !
      ! Last configuration change at 23:33:29 UTC Sun Oct 13 2024
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      service compress-config
      !
      hostname sw1
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no logging console
      !
      username cisco secret 5 $1$c.T6$8bDTN.RI1GJtFcJjSfAIL1
      no aaa new-model
      !
      !
      !
      !
      !
      !
      !
      !
      ip domain-name cisco.local
      ip cef
      no ipv6 cef
      !
      !
      !
      spanning-tree mode pvst
      spanning-tree extend system-id
      !
      vlan filter VACL_1 vlan-list 1
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface GigabitEthernet0/0
       switchport trunk allowed vlan 1,50,99
       switchport trunk encapsulation dot1q
       switchport mode trunk
       negotiation auto
      !
      interface GigabitEthernet0/1
       negotiation auto
      !
      interface GigabitEthernet0/2
       switchport trunk allowed vlan 1,50,99
       switchport trunk encapsulation dot1q
       switchport mode dynamic desirable
       negotiation auto
      !
      interface GigabitEthernet0/3
       negotiation auto
      !
      interface Vlan1
       ip address 10.0.0.2 255.255.255.0
      !
      ip forward-protocol nd
      !
      ip http server
      ip http secure-server
      !
      ip ssh server algorithm encryption aes128-ctr aes192-ctr aes256-ctr
      ip ssh client algorithm encryption aes128-ctr aes192-ctr aes256-ctr
      !
      !
      !
      !
      !
      !
      control-plane
      !
      banner exec ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      banner incoming ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      banner login ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       exec-timeout 0 0
       login local
       transport input telnet ssh
      line vty 5 15
       login local
       transport input telnet ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n1
    image_definition: null
    label: Sw1
    node_definition: iosvl2
    ram: null
    tags: []
    x: -40
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      #cloud-config
      hostname: inserthostname-here
      manage_etc_hosts: True
      system_info:
        default_user:
          name: cisco
      password: cisco
      chpasswd: { expire: False }
      ssh_pwauth: True
      ssh_authorized_keys:
         - your-ssh-pubkey-line-goes-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n2
    image_definition: null
    label: PC-A
    node_definition: ubuntu
    ram: null
    tags: []
    x: -240
    y: -40
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: |-
      # this is a shell script which will be sourced at boot
      hostname inserthostname-here
      # configurable user account
      USERNAME=cisco
      PASSWORD=cisco
      # no password for tc user by default
      TC_PASSWORD=
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: SRV-A
    node_definition: server
    ram: null
    tags: []
    x: -240
    y: 80
    interfaces:
      - id: i0
        label: eth0
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3092 bytes
      !
      ! Last configuration change at 23:35:52 UTC Sun Oct 13 2024
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      service compress-config
      !
      hostname Sw2
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no logging console
      !
      username cisco password 0 cisco
      no aaa new-model
      !
      !
      !
      !
      !
      !
      !
      !
      ip domain-name cisco.local
      ip cef
      no ipv6 cef
      !
      !
      !
      spanning-tree mode pvst
      spanning-tree extend system-id
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface GigabitEthernet0/0
       switchport trunk allowed vlan 1,50,99
       switchport trunk encapsulation dot1q
       switchport mode dynamic desirable
       negotiation auto
      !
      interface GigabitEthernet0/1
       negotiation auto
      !
      interface GigabitEthernet0/2
       switchport access vlan 50
       switchport mode access
       negotiation auto
      !
      interface GigabitEthernet0/3
       switchport access vlan 50
       switchport mode access
       negotiation auto
      !
      interface Vlan1
       ip address 10.0.0.3 255.255.255.0
      !
      ip forward-protocol nd
      !
      ip http server
      ip http secure-server
      !
      ip ssh server algorithm encryption aes128-ctr aes192-ctr aes256-ctr
      ip ssh client algorithm encryption aes128-ctr aes192-ctr aes256-ctr
      !
      !
      !
      !
      !
      !
      control-plane
      !
      banner exec ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      banner incoming ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      banner login ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       exec-timeout 0 0
       login local
       transport input telnet ssh
      line vty 5 15
       login local
       transport input telnet ssh
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: Sw2
    node_definition: iosvl2
    ram: null
    tags: []
    x: -40
    y: -240
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      #cloud-config
      hostname: inserthostname-here
      manage_etc_hosts: True
      system_info:
        default_user:
          name: cisco
      password: cisco
      chpasswd: { expire: False }
      ssh_pwauth: True
      ssh_authorized_keys:
         - your-ssh-pubkey-line-goes-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n5
    image_definition: null
    label: PC-B
    node_definition: ubuntu
    ram: null
    tags: []
    x: -240
    y: -240
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: |-
      #cloud-config
      hostname: inserthostname-here
      manage_etc_hosts: True
      system_info:
        default_user:
          name: cisco
      password: cisco
      chpasswd: { expire: False }
      ssh_pwauth: True
      ssh_authorized_keys:
         - your-ssh-pubkey-line-goes-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n6
    image_definition: null
    label: PC-C
    node_definition: ubuntu
    ram: null
    tags: []
    x: 160
    y: -240
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: |-
      #cloud-config
      hostname: inserthostname-here
      manage_etc_hosts: True
      system_info:
        default_user:
          name: cisco
      password: cisco
      chpasswd: { expire: False }
      ssh_pwauth: True
      ssh_authorized_keys:
         - your-ssh-pubkey-line-goes-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n7
    image_definition: null
    label: PC-D
    node_definition: ubuntu
    ram: null
    tags: []
    x: 160
    y: -360
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 2677 bytes
      !
      ! Last configuration change at 23:37:17 UTC Sun Oct 13 2024
      !
      version 15.2
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      service compress-config
      !
      hostname Sw3
      !
      boot-start-marker
      boot-end-marker
      !
      !
      no logging console
      !
      no aaa new-model
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      !
      !
      spanning-tree mode pvst
      spanning-tree extend system-id
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface GigabitEthernet0/0
       negotiation auto
      !
      interface GigabitEthernet0/1
       negotiation auto
      !
      interface GigabitEthernet0/2
       negotiation auto
      !
      interface GigabitEthernet0/3
       negotiation auto
      !
      ip forward-protocol nd
      !
      ip http server
      ip http secure-server
      !
      ip ssh server algorithm encryption aes128-ctr aes192-ctr aes256-ctr
      ip ssh client algorithm encryption aes128-ctr aes192-ctr aes256-ctr
      !
      !
      !
      !
      !
      !
      control-plane
      !
      banner exec ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      banner incoming ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      banner login ^C
      IOSv - Cisco Systems Confidential -

      Supplemental End User License Restrictions

      This IOSv software is provided AS-IS without warranty of any kind. Under no circumstances may this software be used separate from the Cisco Modeling Labs Software that this software was provided with, or deployed or used as part of a production environment.

      By using the software, you agree to abide by the terms and conditions of the Cisco End User License Agreement at http://www.cisco.com/go/eula. Unauthorized use or distribution of this software is expressly prohibited.
      ^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       exec-timeout 0 0
       login
      !
      !
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n8
    image_definition: null
    label: Sw3
    node_definition: iosvl2
    ram: null
    tags: []
    x: 120
    y: 120
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      #cloud-config
      hostname: inserthostname-here
      manage_etc_hosts: True
      system_info:
        default_user:
          name: cisco
      password: cisco
      chpasswd: { expire: False }
      ssh_pwauth: True
      ssh_authorized_keys:
         - your-ssh-pubkey-line-goes-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n9
    image_definition: null
    label: PC-E
    node_definition: ubuntu
    ram: null
    tags: []
    x: 120
    y: 280
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: |-
      hostname inserthostname-here
      end
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n10
    image_definition: null
    label: R2
    node_definition: csr1000v
    ram: null
    tags: []
    x: 400
    y: 40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet1
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet2
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet3
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet4
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: hostname inserthostname-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n11
    image_definition: null
    label: Sw4
    node_definition: iosvl2
    ram: null
    tags: []
    x: 560
    y: 120
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      #cloud-config
      hostname: inserthostname-here
      manage_etc_hosts: True
      system_info:
        default_user:
          name: cisco
      password: cisco
      chpasswd: { expire: False }
      ssh_pwauth: True
      ssh_authorized_keys:
         - your-ssh-pubkey-line-goes-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n12
    image_definition: null
    label: PC-F
    node_definition: ubuntu
    ram: null
    tags: []
    x: 560
    y: 280
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: |-
      #cloud-config
      hostname: inserthostname-here
      manage_etc_hosts: True
      system_info:
        default_user:
          name: cisco
      password: cisco
      chpasswd: { expire: False }
      ssh_pwauth: True
      ssh_authorized_keys:
         - your-ssh-pubkey-line-goes-here
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n13
    image_definition: null
    label: PC-G
    node_definition: ubuntu
    ram: null
    tags: []
    x: 360
    y: 280
    interfaces:
      - id: i0
        label: ens2
        slot: 0
        type: physical
links:
  - id: l0
    n1: n0
    n2: n1
    i1: i1
    i2: i1
    conditioning: {}
    label: csr1000v-0-GigabitEthernet1<->iosvl2-0-GigabitEthernet0/0
  - id: l1
    n1: n2
    n2: n1
    i1: i0
    i2: i2
    conditioning: {}
    label: ubuntu-0-ens2<->iosvl2-0-GigabitEthernet0/1
  - id: l2
    n1: n3
    n2: n1
    i1: i0
    i2: i4
    conditioning: {}
    label: server-0-eth0<->iosvl2-0-GigabitEthernet0/3
  - id: l3
    n1: n4
    n2: n1
    i1: i1
    i2: i3
    conditioning: {}
    label: iosvl2-1-GigabitEthernet0/0<->iosvl2-0-GigabitEthernet0/2
  - id: l4
    n1: n4
    n2: n5
    i1: i2
    i2: i0
    conditioning: {}
    label: iosvl2-1-GigabitEthernet0/1<->ubuntu-2-ens2
  - id: l5
    n1: n4
    n2: n7
    i1: i3
    i2: i0
    conditioning: {}
    label: Sw2-GigabitEthernet0/2<->ubuntu-3-ens2
  - id: l6
    n1: n4
    n2: n6
    i1: i4
    i2: i0
    conditioning: {}
    label: Sw2-GigabitEthernet0/3<->ubuntu-1-ens2
  - id: l7
    n1: n0
    n2: n10
    i1: i4
    i2: i1
    conditioning: {}
    label: csr1000v-0-GigabitEthernet4<->csr1000v-1-GigabitEthernet1
  - id: l8
    n1: n0
    n2: n8
    i1: i3
    i2: i1
    conditioning: {}
    label: R1-GigabitEthernet3<->Sw3-GigabitEthernet0/0
  - id: l9
    n1: n8
    n2: n9
    i1: i2
    i2: i0
    conditioning: {}
    label: Sw3-GigabitEthernet0/1<->PC-E-ens2
  - id: l10
    n1: n10
    n2: n11
    i1: i2
    i2: i1
    conditioning: {}
    label: R2-GigabitEthernet2<->Sw4-GigabitEthernet0/0
  - id: l11
    n1: n12
    n2: n11
    i1: i0
    i2: i2
    conditioning: {}
    label: PC-F-ens2<->Sw4-GigabitEthernet0/1
  - id: l12
    n1: n13
    n2: n8
    i1: i0
    i2: i3
    conditioning: {}
    label: ubuntu-0-ens2<->Sw3-GigabitEthernet0/2
lab:
  description: ''
  notes: |-
    # LAB: SPAN/RSPAN/ERSPAN
    Where to use each:
    - SPAN: used when packet analyzer is on the same switch as the traffic to be captured
    - RSPAN: used when packet analyzer is on another switch as the traffic to be captured
    - ERSPAN: used when packet analyzer is on a remote location as the traffic to be caputred

    ## SPAN
    SW2 ports 2 and 3 are on vlan 50. Declare the source for the monitor session and destination.
    ```cisco
    config#)monitor session 1 source interface g0/3
    config#)monitor session 1 destination interface g0/2
    config#)exit
    >show monitor session 1
    ```
    Observe traffic being captured by right clicking the link on g0/2 and clicking packet capture. Traffic from G0/3 is now being sent to G0/2. Switches by default would not allow this. SPAN allows for the traffic to be mirrored to another port.

    ## RSPAN
    SW1 port g0/1 and g0/3 are on vlan 1. Configure a remote-span vlan then configure monitor sessions to capture the traffic from g0/1, g0/3. Note: Devices should not be configured on the remote-span vlan. MAC-addresses are not learned. Ensure no loops are on the remote-span vlan. Traffic is flooded out the remote-span vlan. Monitor session number is locally significant but best to keep the same to avoid confusion

    SW2 port g0/1 is the destination for the packet analyzer. Configure remote-span vlan then configure monitor sessions to g0/1. Ensure traffic is trunked for the remote-span vlan between switches.
    ```cisco
    SW1)config# vlan 99
    SW1)config-vlan# name RSPAN_VLAN
    SW1)config-vlan# remote-span
    SW1)config# monitor session 1 source interface g1, g3
    SW1)config# monitor session 1 destination remote vlan 99

    SW2) config# vlan 99
    SW2) config-vlan# name RSPAN_VLAN
    SW2) config-vlan# remote-span
    SW2) config# monitor session 1 source remote vlan 99
    SW2) config# monitor session 1 destination interface g0/1

    show monitor session 1
    show monitor remote
    ```
    Observe traffic being captured by right clicking the link on g0/1 and clicking packet capture. Traffic from SW1 g1,g3 is now being sent to SW2 G0/1.

    ## ERSPAN
    IOS-VL image does not have capability for ERSPAN. On R1 configure source monitor session for erspan. On R2 configure destination monitor session for erspan. Capture traffic received from G3 on R1 and send it to PC-F.

    ```cisco
    ! Define ACL for filtering
    R1) config# ip access-list extended PC_E_TRAFFIC
    R1) config-acl# 10 permit ip host 10.100.0.11 any
    R1) config-acl# exit

    R1)config# monitor session 1 type erspan-source
    R1)config-monitor# description SOURCE-PC-E-TRAFFIC
    R1)config-monitor# source interface g1/0/4 rx
    R1)config-monitor# filter access-group PC_E_TRAFFIC
    R1)config-monitor# no shutdown
    R1)config-monitor# destination
    R1)config-monitor-destination# erspan-id 2
    R1)config-monitor# destination# ip address 172.16.0.11
    R1)config-monitor# destination# origin ip address 10.100.0.254
    R1)config-monitor# end

    R2)config# monitor session 2 type erspan-destination
    R2)config-monitor#  destination interface G2
    R2)config-monitor#  source
    R2)config-monitor-source# erspan-id 2
    R2)config-monitor-source# ip address 10.100.0.11
    ```
    Observe traffic being captured by right clicking the link on SW4 g0/1 and clicking packet capture. Traffic received on R1 G3 is now being sent to PC-F.
  title: SPAN/RSPAN/ERSPAN
  version: 0.2.1
